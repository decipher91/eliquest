function QuestController(e,t,o,n,c){"use strict";var r=c.localDB;c.remoteDB;e.ip=n,r.allDocs({include_docs:!0,attachments:!0}).then(function(e){console.log(e)})["catch"](function(e){console.log(e)}),e.lang="English",e.results=[],e.quests=o,e.questInitialized=!1,e.initQuest=function(){e.questInitialized=!0,e.questions=e.quests,e.gender="Male"},e.submitQuest=function(){e.quests?r.post({quests:e.quests,gender:e.gender,ip:e.ip.city+", "+e.ip.country}).then(function(t){console.log(t),e.quests=o,e.questInitialized=!1,e.gender="Male"})["catch"](function(e){console.log(e)}):alert("no answers provided")},e.$on("add",function(t,o){console.log(o),e.results.push(o),console.log(e.results)})}function AdminController(e,t,o,n,c){"use strict";var r=c.localDB,s=c.remoteDB;e.lang="English",e.refresh=function(){r.allDocs({include_docs:!0,attachments:!0}).then(function(t){e.results=t.rows,e.$apply()})["catch"](function(e){console.log(e)})},e.refreshRemote=function(){s.allDocs({include_docs:!0,attachments:!0}).then(function(t){e.results=t.rows,e.$apply()})["catch"](function(e){console.log(e)})},e.refreshRemote(),e.remove=function(t){r.get(t).then(function(e){return r.remove(e)}).then(function(t){e.refresh()})["catch"](function(e){console.log(e)})}}function Quest(e,t){"use strict";return{get:function(){var o=e.defer();return t({method:"GET",url:"tasks.json"}).success(function(e){console.log(e),o.resolve(e)}).error(function(e){o.reject(e)}),o.promise}}}function Result(e,t){"use strict";var o=t.localDB,n=t.remoteDB;return{getLocal:function(){var t=e.defer();o.allDocs({include_docs:!0,attachments:!0}).then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)})},getRemote:function(){var t=e.defer();n.allDocs({include_docs:!0,attachments:!0}).then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)})}}}function pouchService(){"use strict";this.localDB=new PouchDB("quest"),this.remoteDB=new PouchDB("http://localhost:5984/quiz")}function ipService(e,t){"use strict";return{get:function(){var o=e.defer();return t.get("http://ip-api.com/json").success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise}}}angular.module("quest",["ionic","pouchdb","quest.controllers","quest.factories","quest.services","ngMaterial"]).run(["pouchService",function(e){var t=e.localDB,o=e.remoteDB;t.sync(o,{live:!0})}]).config(["$stateProvider","$urlRouterProvider","$httpProvider","$ionicConfigProvider","$mdThemingProvider",function(e,t,o,n,c){e.state("home",{url:"/home",templateUrl:"templates/home.html",controller:"QuestController",cache:!1,resolve:{quests:["Quest",function(e){return e.get()}],ip:["ipService",function(e){return e.get()}]}}).state("admin",{url:"/admin",templateUrl:"templates/admin.html",controller:"AdminController",cache:!1,resolve:{local:["Result",function(e){return e.getLocal()}],remote:["Result",function(e){return e.getRemote()}]}}),t.otherwise("/home"),o.useApplyAsync(!0),n.scrolling.jsScrolling(!1),n.backButton.text("").icon("ion ion-android-arrow-back"),c.theme("default").primaryPalette("amber").accentPalette("deep-purple",{"default":"900"})}]),angular.module("quest.controllers",[]).controller("QuestController",QuestController).controller("AdminController",AdminController),QuestController.$inject=["$scope","$rootScope","quests","ip","pouchService"],AdminController.$inject=["$scope","$rootScope","local","remote","pouchService"],angular.module("quest.factories",[]).factory("Quest",Quest).factory("Result",Result),Quest.$inject=["$q","$http"],Result.$inject=["$q","pouchService"],angular.module("quest.services",[]).service("pouchService",pouchService).service("ipService",ipService),pouchService.$inject=[],ipService.$inject=["$q","$http"];