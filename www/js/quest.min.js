function QuestController(e,t,o,n){"use strict";var r=n.localDB;n.remoteDB;e.ip=o?o.ip:"ip not recognized",e.genders={male:{value:"Male",text:{ru:"Мужчина",en:"Male"}},female:{value:"Female",text:{ru:"Женщина",en:"Female"}}},e.lang="English",e.results=[],e.tasks=t,e.questInitialized=!1,e.initQuest=function(){e.questInitialized=!0,e.gender="Male"},e.setValue=function(e){console.log(e)},e.submitQuest=function(){console.log(e.gender),e.tasks?r.post({tasks:e.tasks,gender:e.gender,ip:e.ip.ip}).then(function(o){console.log(o),e.$apply(function(){e.tasks=t,e.questInitialized=!1,e.gender="Male"})})["catch"](function(e){console.log(e)}):alert("no answers provided")}}function AdminController(e,t,o,n){"use strict";var r=n.localDB,c=n.remoteDB;e.lang="English",e.refresh=function(){r.allDocs({include_docs:!0,attachments:!0}).then(function(t){e.results=t.rows,e.$apply()})["catch"](function(e){console.log(e)})},e.refreshRemote=function(){c.allDocs({include_docs:!0,attachments:!0}).then(function(t){e.$apply(function(){e.results=t.rows})})["catch"](function(e){console.log(e)})},e.refreshRemote(),e.remove=function(t){r.get(t).then(function(e){return r.remove(e)}).then(function(t){e.refresh()})["catch"](function(e){console.log(e)})}}function Quest(e,t){"use strict";return{get:function(){var o=e.defer();return t({method:"GET",url:"tasks.json"}).success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise}}}function Result(e,t){"use strict";var o=t.localDB,n=t.remoteDB;return{getLocal:function(){var t=e.defer();o.allDocs({include_docs:!0,attachments:!0}).then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)})},getRemote:function(){var t=e.defer();n.allDocs({include_docs:!0,attachments:!0}).then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)})}}}function pouchService(){"use strict";this.localDB=new PouchDB("quest"),this.remoteDB=new PouchDB("couchdb-ccff26.smileupps.com /quiz")}function ipService(e,t){"use strict";return{get:function(){var o=e.defer(),n="http://ipv4.myexternalip.com/json";t.get(n).success(function(e){o.resolve(e)}).error(function(e){console.log(e),o.reject(e)})}}}angular.module("quest",["ionic","pouchdb","quest.controllers","quest.factories","quest.services","ngMaterial"]).run(["pouchService",function(e){var t=e.localDB,o=e.remoteDB;t.sync(o,{live:!0})}]).config(["$stateProvider","$urlRouterProvider","$httpProvider","$ionicConfigProvider","$mdThemingProvider",function(e,t,o,n,r){e.state("home",{url:"/home",templateUrl:"templates/home.html",controller:"QuestController",cache:!1,resolve:{tasks:["Quest",function(e){return e.get()}],ip:["ipService",function(e){return e.get()}]}}).state("admin",{url:"/admin",templateUrl:"templates/admin.html",controller:"AdminController",cache:!1,resolve:{local:["Result",function(e){return e.getLocal()}],remote:["Result",function(e){return e.getRemote()}]}}),t.otherwise("/home"),o.useApplyAsync(!0),n.scrolling.jsScrolling(!1),n.backButton.text("").icon("ion ion-android-arrow-back"),r.theme("default").primaryPalette("amber").accentPalette("deep-purple",{"default":"900"})}]),angular.module("quest.controllers",[]).controller("QuestController",QuestController).controller("AdminController",AdminController),QuestController.$inject=["$scope","tasks","ip","pouchService"],AdminController.$inject=["$scope","local","remote","pouchService"],angular.module("quest.factories",[]).factory("Quest",Quest).factory("Result",Result),Quest.$inject=["$q","$http"],Result.$inject=["$q","pouchService"],angular.module("quest.services",[]).service("pouchService",pouchService).service("ipService",ipService),pouchService.$inject=[],ipService.$inject=["$q","$http"];